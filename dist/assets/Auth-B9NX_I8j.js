import{r as x,u as R,a as S,b as U,c as F,d as A,j as e,L as k,I as h,P as q,F as P,e as I,B as l,s as D}from"./index-DVhWBxFB.js";const C=()=>{var u,g,p;const[s,n]=x.useState(!1),[o,f]=x.useState(null),{register:i,handleSubmit:w,reset:j,formState:{errors:r}}=R(),[b,{isLoading:c}]=S(),[v,{isLoading:m}]=U(),y=F(),N=A(),L=async t=>{try{if(s){const a=new FormData;a.append("name",t.name),a.append("email",t.email),a.append("password",t.password),o&&a.append("avatar",o),await v(a).unwrap(),l.success("Registration successful! We've sent you a registration email."),n(!1)}else await b(t).unwrap(),l.success("Login successful!"),y(D());N("/"),j()}catch(a){l.error(a.message),console.log(a)}},d=t=>{f(t.files[0])};return e.jsxs("div",{className:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsx(k,{}),e.jsx("h2",{className:"mt-5 text-center text-2xl leading-9 tracking-tight text-black",children:s?"Create your account":"Login to your account"})]}),e.jsxs("div",{className:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsxs("form",{onSubmit:w(L),className:"space-y-6",children:[e.jsx(h,{label:"Email",type:"email",register:i("email",{required:"Email is required"}),error:(u=r.email)==null?void 0:u.message,className:"w-full border-gray-500 "}),e.jsx(q,{label:"Password",register:i("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters long"}}),error:(g=r.password)==null?void 0:g.message}),s&&e.jsxs(e.Fragment,{children:[e.jsx(h,{label:"Name",type:"text",register:i("name",{required:"Name is required"}),error:(p=r.name)==null?void 0:p.message,className:"w-full  border-gray-500 "}),e.jsx("div",{className:"file-upload-container",children:e.jsx(P,{mode:"basic",accept:"image/*",className:"custom-file-upload",uploadLabel:"Upload",onSelect:d,auto:!1,chooseOptions:{label:"Upload Avatar",icon:"pi pi-fw pi-images"},customUpload:!0,uploadHandler:d})})]}),e.jsx("button",{type:"submit",disabled:s?m:c,className:"w-full py-2 px-4 bg-black text-white font-semibold rounded-lg shadow-md hover:bg-gray-900 disabled:opacity-50",children:s?m?"Registering...":"Register":c?"Logging in...":"Login"})]}),r.password&&!s&&e.jsx("div",{className:"text-right mt-2 ",children:e.jsx(I,{to:"/forgot-password",children:e.jsx("span",{className:"hover:underline text-purple-800 text-base",children:"Forgot Password?"})})}),e.jsx("p",{className:"text-black cursor-pointer text-center mt-4",onClick:()=>n(!s),children:s?e.jsxs(e.Fragment,{children:["Already have an account?"," ",e.jsx("span",{className:"hover:underline",children:"Login here"})]}):e.jsxs(e.Fragment,{children:["Dont have an account?"," ",e.jsx("span",{className:"hover:underline",children:"Register here"})]})})]})]})};export{C as default};
